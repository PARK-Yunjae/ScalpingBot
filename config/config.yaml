# ============================================================================
# ScalpingBot v3.2 ì„¤ì • íŒŒì¼
# ============================================================================
# v3.2 í•µì‹¬ ë³€ê²½: "í›„ë³´ëŠ” ë„“ê²Œ, ì‹¤í–‰ì€ ì—„ê²©í•˜ê²Œ"
# - Hard Filter ìµœì†Œí™” (4ê°œë§Œ)
# - ë‚˜ë¨¸ì§€ëŠ” ì ìˆ˜í™” (Soft Scoring)
# - Adaptive Mode (ì‹œì¥/ì„±ê³¼ì— ë”°ë¼ ìë™ ì¡°ì ˆ)
# ============================================================================
# ê±°ë˜ ë¹„ìš©: ìŠ¬ë¦¬í”¼ì§€ 0.30% + ìˆ˜ìˆ˜ë£Œ 0.03% + ì„¸ê¸ˆ 0.18% = 0.51%
# ì†ìµë¶„ê¸° ìŠ¹ë¥ : 55%
# ============================================================================

# -----------------------------------------
# ìš´ì˜ ëª¨ë“œ
# -----------------------------------------
mode: LIVE_MICRO  # LIVE_DATA_ONLY / LIVE_MICRO / LIVE

# -----------------------------------------
# í”„ë¦¬ë§ˆì¼“ ë¶„ì„ (08:50 ì‹œì‘ â†’ ë™ì‹œí˜¸ê°€ ê±°ë˜ëŸ‰ ë°˜ì˜)
# -----------------------------------------
premarket:
  enabled: true
  start_time: "08:50"
  schedule:
    volume_top: "08:50"
    news_collect: "08:52"
    sector_analysis: "08:54"
    ai_analysis: "08:55"
    gap_analysis: "09:00"
  volume_top_count: 50
  news_per_stock: 5

# -----------------------------------------
# AI ì„¤ì •
# -----------------------------------------
ai:
  provider: gemini
  model: gemini-2.5-flash
  timeout: 60
  max_queue_size: 10
  retry_count: 2
  use_for_entry: false
  use_for_universe: true
  use_for_news: true
  use_for_review: true
  use_for_quick_filter: true

# -----------------------------------------
# ë§¤ë§¤ ì „ëµ
# -----------------------------------------
trading:
  # ì†ì ˆ/ìµì ˆ
  stop_loss: -0.8
  take_profit_1: 2.5
  take_profit_2: 3.5
  
  # íŠ¸ë ˆì¼ë§ ìŠ¤íƒ‘
  trailing:
    enabled: true
    activation: 1.2
    distance: 0.8
  
  # ì‹œê°„ ì†ì ˆ
  time_stop:
    enabled: true
    no_profit_minutes: 12
    no_profit_threshold: 0.7
    max_hold_minutes: 20
  
  # ì‹œê°„ ì„¤ì •
  market_open: "09:05"
  market_close: "15:07"
  force_close_time: "15:07"

# ============================================================================
# ğŸ†• v3.2 ì ìˆ˜ ì‹œìŠ¤í…œ (Soft Scoring)
# ============================================================================
# ê¸°ì¡´ í•˜ë“œ í•„í„° â†’ ì ìˆ˜í™” (0ë§¤ë§¤ ë°©ì§€)
# Hard Firewall í†µê³¼ í›„, ì ìˆ˜ë¡œ ì§„ì… ì—¬ë¶€ ê²°ì •
# ============================================================================
scoring:
  # ê°ì  í•­ëª© (ê¸°ì¡´ í•˜ë“œ í•„í„° â†’ ì ìˆ˜ë¡œ ì „í™˜)
  penalties:
    # CCI ê³¼ì—´ (ê¸°ì¡´: 150 ì´ìƒ ì°¨ë‹¨ â†’ ì ìˆ˜í™”)
    cci_overheat_threshold: 150
    cci_overheat_penalty: -10
    cci_extreme_threshold: 200
    cci_extreme_penalty: -20
    
    # RSI ê³¼ë§¤ìˆ˜ (ê¸°ì¡´: 80 ì´ìƒ ì°¨ë‹¨ â†’ ì ìˆ˜í™”)
    rsi_overbought_threshold: 80
    rsi_overbought_penalty: -10
    rsi_extreme_threshold: 85
    rsi_extreme_penalty: -15
    
    # VWAP ì•„ë˜ (ê¸°ì¡´: ì°¨ë‹¨ â†’ ì ìˆ˜í™”)
    below_vwap_penalty: -15
    
    # EMA ì—­ë°°ì—´ (ìœ ì§€)
    ema_bearish_penalty: -5
    
    # ê±°ë˜ëŸ‰ ë¶€ì¡± (1.5ë°° ë¯¸ë§Œ)
    low_volume_threshold: 1.5
    low_volume_penalty: -10
  
  # ê°€ì  í•­ëª©
  bonuses:
    ema_bullish: 10           # EMA ì •ë°°ì—´
    high_volume_threshold: 3.0
    high_volume_bonus: 15     # ê±°ë˜ëŸ‰ 3ë°° ì´ìƒ
    vwap_strong_threshold: 1.0
    vwap_strong_bonus: 10     # VWAP +1% ì´ìƒ

# ============================================================================
# ğŸ†• v3.2 Hard Firewall (ì ˆëŒ€ ì¡°ê±´ - ìµœì†Œí™”!)
# ============================================================================
# ì´ 4ê°€ì§€ë§Œ í†µê³¼í•˜ë©´ ë¨ (ë‚˜ë¨¸ì§€ëŠ” ì ìˆ˜ë¡œ)
# ============================================================================
hard_firewall:
  # 1. ê±°ë˜ëŸ‰ ìµœì†Œ ì¡°ê±´ (ìœ ë™ì„±)
  min_volume_ratio: 0.5       # í‰ê·  ëŒ€ë¹„ 0.5ë°° ì´ìƒ
  
  # 2. ë‹¹ì¼ ê¸‰ë“± ì œí•œ (ìƒí•œê°€ ìœ„í—˜)
  max_day_change_pct: 15.0    # +15% ì´ìƒì€ ì§„ì… ê¸ˆì§€
  
  # 3. ì ì‹¬ì‹œê°„ íšŒí”¼
  lunch_break_enabled: true
  lunch_start: "12:00"
  lunch_end: "13:00"
  
  # 4. ì´ë¯¸ ë³´ìœ  ì¤‘ì¸ ì¢…ëª© (ì¤‘ë³µ ë§¤ìˆ˜ ê¸ˆì§€)
  # â†’ ì½”ë“œì—ì„œ ìë™ ì²´í¬

# ============================================================================
# ğŸ†• v3.2 Adaptive Mode (ìë™ ê°•ì•½ ì¡°ì ˆ)
# ============================================================================
# ì‹œì¥ ìƒí™© + ë´‡ ì„±ê³¼ì— ë”°ë¼ min_score, ì¿¨íƒ€ì„ ë“± ìë™ ì¡°ì •
# ============================================================================
adaptive_mode:
  enabled: true
  default_mode: "BALANCED"
  
  # ëª¨ë“œë³„ ì„¤ì • (v3.2.3 - ì‹¤ì „ ë°ì´í„° ê¸°ì¤€)
  # 80ì  ì´ìƒ: 40% ìŠ¹ë¥ , 80ì  ë¯¸ë§Œ: 17% ìŠ¹ë¥ 
  modes:
    DEFENSIVE:
      min_score: 85
      cooldown_minutes: 15
      description: "ë°©ì–´ ëª¨ë“œ - í™•ì‹¤í•œ ê²ƒë§Œ (85ì  ì´ìƒ)"
    BALANCED:
      min_score: 80
      cooldown_minutes: 10
      description: "ê· í˜• ëª¨ë“œ - ê¸°ë³¸ê°’ (80ì  ì´ìƒ)"
    AGGRESSIVE:
      min_score: 75
      cooldown_minutes: 5
      description: "ê³µê²© ëª¨ë“œ - ê¸°íšŒ í™•ëŒ€ (75ì  ì´ìƒ)"
  
  # ëª¨ë“œ ì „í™˜ íŠ¸ë¦¬ê±°
  triggers:
    # DEFENSIVE ì „í™˜ ì¡°ê±´
    to_defensive:
      consecutive_losses: 3         # 3ì—°íŒ¨ ì‹œ
      index_drop_pct: -1.5          # ì§€ìˆ˜ -1.5% ì´ìƒ í•˜ë½ ì‹œ
      daily_loss_pct: -1.5          # ë‹¹ì¼ ì†ì‹¤ -1.5% ì´ìƒ ì‹œ
    
    # AGGRESSIVE ì „í™˜ ì¡°ê±´
    to_aggressive:
      daily_profit_pct: 1.0         # ë‹¹ì¼ ìˆ˜ìµ +1% ì´ìƒ
      consecutive_wins: 3           # 3ì—°ìŠ¹ ì‹œ
      index_rise_pct: 1.0           # ì§€ìˆ˜ +1% ì´ìƒ ìƒìŠ¹ ì‹œ
    
    # BALANCED ë³µê·€ ì¡°ê±´
    to_balanced:
      from_defensive_wins: 2        # DEFENSIVEì—ì„œ 2ì—°ìŠ¹ ì‹œ
      from_aggressive_losses: 2     # AGGRESSIVEì—ì„œ 2ì—°íŒ¨ ì‹œ

# ============================================================================
# ğŸ†• v3.2 í¼ë„ ë¡œê·¸ (íƒˆë½ ì¶”ì )
# ============================================================================
# "ì™œ 0ë§¤ë§¤ì¸ì§€" ë‹¨ê³„ë³„ ì¶”ì 
# ============================================================================
funnel_log:
  enabled: true
  log_interval_minutes: 10        # 10ë¶„ë§ˆë‹¤ í¼ë„ ìš”ì•½
  discord_notify: true            # Discordë¡œ í¼ë„ ìš”ì•½ ì „ì†¡
  show_top_candidates: 5          # ìƒìœ„ 5ê°œ í›„ë³´ í•­ìƒ í‘œì‹œ

# -----------------------------------------
# ë¶„ë´‰ ì§€í‘œ
# -----------------------------------------
indicators:
  candle_interval: 5
  cci_period: 14
  rsi_period: 14
  volume_avg_period: 10
  
  # ì „ëµ í™œì„±í™”
  strategies:
    breakout: true
    pullback: true
    gap_play: true
    vwap_bounce: false
  
  # ëŒíŒŒ ì „ëµ (cci_max ì œê±° - ì ìˆ˜í™”ë¡œ ì „í™˜)
  breakout:
    cci_min: 100
    # cci_max: ì‚­ì œë¨ (ì ìˆ˜ë¡œ ì „í™˜)
    rsi_max: 70
    volume_min: 2.0
  
  pullback:
    min_rise: 2.0
    correction_min: -0.5
    correction_max: -1.5
    volume_decrease: 0.7
  
  gap_play:
    gap_min: 0.5
    gap_max: 3.0

# -----------------------------------------
# ì•ˆì „ ì¥ì¹˜ (ì˜ˆìˆ˜ê¸ˆ 50ë§Œì› ê¸°ì¤€)
# -----------------------------------------
safety:
  max_positions: 3
  max_position_size: 100000
  max_total_exposure: 300000
  
  max_daily_loss: -15000
  max_daily_loss_pct: -3.0
  max_daily_trades: 20
  
  consecutive_loss_rest: 3        # 3ì—°íŒ¨ â†’ DEFENSIVE ëª¨ë“œ ì „í™˜
  rest_minutes: 10
  consecutive_loss_stop: 7        # 7ì—°íŒ¨ â†’ ë‹¹ì¼ ì¤‘ë‹¨ + í”„ë¡œê·¸ë¨ ì¢…ë£Œ
  
  index_emergency_threshold: -2.5
  index_conservative_threshold: -1.5

# -----------------------------------------
# êµ¬ì¡° ê¸°ë°˜ ì†ì ˆ
# -----------------------------------------
structure_stop:
  enabled: true
  breakout_stop: true
  vwap_stop: true

# -----------------------------------------
# EMA ì„¤ì •
# -----------------------------------------
ema:
  fast_period: 9
  slow_period: 20
  use_ema_filter: true

# -----------------------------------------
# ìœ ë‹ˆë²„ìŠ¤ (TV100ë§Œ ì‚¬ìš© - ë‹¨ìˆœí™”)
# -----------------------------------------
universe:
  condition_name: "TV100"
  target_size: 50
  min_price: 3000
  max_price: 50000
  min_volume: 500000
  # ê±°ë˜ëŒ€ê¸ˆ í•„í„° ì œê±° (TV100ì´ë©´ ì¶©ë¶„)
  min_market_cap: 25000000000
  max_market_cap: 10000000000000
  refresh_interval: 10
  
  prev_day:
    min_change_pct: 0.5
    max_change_pct: 15.0
    min_volume_ratio: 1.5
  
  exclude_codes:
    - "000000"

# -----------------------------------------
# ëª¨ë‹ˆí„°ë§
# -----------------------------------------
monitoring:
  scan_interval: 5
  position_check_interval: 1
  candle_refresh_interval: 5

# -----------------------------------------
# ë°ì´í„°ë² ì´ìŠ¤
# -----------------------------------------
database:
  path: db/scalping.db
  backup_enabled: true
  backup_time: "15:35"

# -----------------------------------------
# ë¡œê¹…
# -----------------------------------------
logging:
  level: INFO
  file_path: logs/scalping.log
  max_size_mb: 50
  backup_count: 7
  log_signals: true
  log_indicators: false
  log_api_calls: false

# -----------------------------------------
# Discord ì•Œë¦¼
# -----------------------------------------
discord:
  enabled: true
  notify_on:
    buy: true
    sell: true
    stop_loss: true
    take_profit: true
    time_stop: true
    emergency: true
    daily_report: true
    mode_change: true             # ğŸ†• ëª¨ë“œ ì „í™˜ ì•Œë¦¼
    funnel_summary: true          # ğŸ†• í¼ë„ ìš”ì•½ ì•Œë¦¼
