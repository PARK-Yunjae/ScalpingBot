# ScalpingBot v3.0 - 스캘핑 전략 설계서

## 📊 거래 비용 분석

### 비용 구조 (왕복)
```
슬리피지:     0.30%
매수 수수료:  0.015%
매도 수수료:  0.015%
거래세:       0.18% (코스닥)
────────────────────
총 비용:      0.51%
```

### 손익비 분석
| 익절 | 손절 | 순익 | 순손 | 손익비 | 필요 승률 |
|------|------|------|------|--------|----------|
| +1.0% | -0.5% | +0.49% | -1.01% | 1:0.49 | 67% |
| **+1.5%** | **-0.7%** | **+0.99%** | **-1.21%** | **1:0.82** | **55%** ✅ |
| +2.0% | -1.0% | +1.49% | -1.51% | 1:0.99 | 50% |

### 현재 설정
```
익절: +1.5% → 순익 +0.99%
손절: -0.7% → 순손 -1.21%
손익분기 승률: 55%
목표 승률: 58%
```

---

## 🎯 4대 전략

### 전략 1: 돌파 (Breakout)
```
조건:
- 5분봉 종가 > 당일 고점 (신고가)
- CCI(14) > 100 (강한 모멘텀)
- RSI(14) < 80 (과열 아님)
- 거래량 > 평균의 2배

점수:
- CCI 150+: +20점
- 거래량 3배+: +15점
- RSI 60~70: +10점

진입: 총점 60점 이상
```

### 전략 2: 눌림목 (Pullback)
```
조건:
- 당일 +2% 이상 상승 이력
- 고점 대비 -0.5% ~ -1.5% 조정 중
- 가격 > VWAP (강세 유지)
- 조정 시 거래량 감소

점수:
- VWAP 근접: +20점
- 상승폭 3%+: +15점
- 거래량 감소: +10점

진입: 총점 55점 이상
```

### 전략 3: 갭플레이 (Gap Play)
```
조건 (09:05~09:30):
- 갭 상승 +0.5% ~ +3%
- 가격 > VWAP
- 거래량 유지 (급감 아님)

점수:
- 갭 1~2%: +20점
- VWAP 위: +15점
- 거래량 유지: +10점

진입: 총점 55점 이상
```

### 전략 4: 반전 (Reversal)
```
조건:
- CCI(14) < -100 (과매도)
- 긴 아랫꼬리 캔들 출현
- 거래량 급증 (2배 이상)

점수:
- CCI -150 이하: +20점
- 아랫꼬리 몸통 2배+: +15점
- 거래량 3배+: +15점

진입: 총점 65점 이상 (리스크 높음)
```

---

## 📉 청산 전략

### 1. 손절 (절대 규칙)
```
-0.7% 도달 → 즉시 전량 매도
순손실: -1.21% (비용 포함)
```

### 2. 시간 손절
```
진입 후 5분 내 +0.3% 미달 → 청산
진입 후 10분 경과 + 손익 0% 근처 → 청산
```

### 3. 익절
```
+0.5% 도달 → 트레일링 시작
  └─ 고점 대비 -0.4% 하락 시 청산
  
+1.5% 도달 → 50% 물량 익절
+2.5% 도달 → 전량 익절
```

### 4. 장 마감
```
14:50 → 전량 강제 청산
```

---

## 🛡️ 리스크 관리

### 포지션 제한 (예수금 50만원 기준)
```yaml
max_positions: 3          # 동시 3종목
max_position_size: 150000 # 종목당 15만원
max_total_exposure: 400000 # 총 40만원
```

### 일일 한도
```yaml
max_daily_loss: -15000    # 일일 -1.5만원
max_daily_trades: 20      # 일일 20회
```

### 연속 손실 관리
```
3연패 → 10분 휴식
5연패 → 당일 중단 + 프로그램 종료
```

### 시장 상황 대응
```
코스피 -1.5% → 보수적 모드 (진입 기준 강화)
코스피 -2.5% → 긴급 모드 (신규 진입 금지)
```

---

## ⚙️ 분봉 지표

### CCI (14봉)
```
> 200: 과매수 → 진입 자제
100~200: 강한 상승 → 돌파 매수
0~100: 약한 상승 → 풀백 대기
< 0: 하락 → 매수 금지
```

### RSI (14봉)
```
> 80: 과매수 → 진입 자제
50~70: 적정 → 매수 적합
< 40: 약세 → 매수 금지
```

### VWAP
```
가격 > VWAP: 강세 (매수 유리)
가격 < VWAP: 약세 (매수 불리)
```

### 거래량비
```
> 3.0: 급등 가능 → 돌파 신호
2.0~3.0: 관심 증가 → 매수 적합
< 1.0: 관심 저조 → 매수 자제
```

---

## 🤖 AI 역할

### 장 시작 전 (08:30)
```
- 거래량 상위 50개 분석
- 뉴스/공시 해석
- 5개 종목 유니버스 선정
- 시나리오별 대응 전략 제시
```

### 장 마감 후 (15:35)
```
- 당일 거래 복기
- 전략 개선 제안
```

### 실시간 (사용 안 함)
```
❌ 진입/청산 판단 → 규칙 기반으로 대체
   (AI 응답 2~5초는 스캘핑에 너무 느림)
```

---

## 📊 예상 성과

### 가정
```
일일 거래: 10회
승률: 58%
평균 익절: +1.5% (순익 +0.99%)
평균 손절: -0.7% (순손 -1.21%)
```

### 일일 기대 수익
```
승리: 10 × 58% × 0.99% = +5.74%
패배: 10 × 42% × 1.21% = -5.08%
─────────────────────────────
일일 기대값: +0.66%

월간 (22일): +14.5%
```

---

## 📅 타임라인

```
08:00 - 프로그램 시작
08:10 - 거래량 상위 추출
08:15 - 뉴스 수집
08:30 - AI 유니버스 선정
08:50 - 갭 분석
09:05 - 스캘핑 시작
14:50 - 전량 청산
15:35 - 일일 리포트
```
